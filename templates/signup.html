{% extends "base.html" %}

{% block content %}
  <!-- Custom styles for this template -->
  <link href="/assets/custom/signup.css" rel="stylesheet">
  <div class="container">
  <div class="row">
    <div class="col-md-6 col-sm-12 col-md-offset-3">
        <div class="panel panel-custom" style="margin-top:50px">
          <div class="panel-body" >
            <div class="image-post" >
                 <form class="form-signin" id="register" method="post">
                  <input type="hidden" name="next_url" value="{{next_url}}">
                  <h2 class="form-signin-heading">Sign up</h2>
                  <input name="email" type="text" class="form-control" id="email" placeholder="Email address (.edu only)" value="{{ email }}" autofocus>
                  <div class="error">{{ email_error }}</div>
                  <input name="username" type="text" class="form-control" id="username" placeholder="Username" value="{{ username }}">
                  <div class="error">{{ username_error }}</div>
                  <input name="password" type="password" class="form-control" placeholder="Password">
                  <div class="error">{{ password_error }}</div>
                  <button class="btn btn-lg btn-primary btn-block" type="submit">Register</button>
                </form>
              </div>
            </div>
          </div>
        </div>    
    </div>

    <script>
      $(document).ready(function() {
        $("#register").submit( function(e) {
          // Prevent submit until validation
          e.preventDefault();
          var email = $("#email").val();
          var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+edu+$/;
          if (regex.test(email)) {
            // Now submit form
            $("#register").unbind('submit').submit();
          }
          else {
            alert("Please use a .edu email address to register!");
          }
        });
      });
    </script>
{% endblock %}
